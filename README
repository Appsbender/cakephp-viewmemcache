Configuration

Put in APP/plugins/view_memcache

This needs to go in app/bootstrap.php (rather than core.php as we're a plugin)

Cache::config('view_memcache', array(
    'engine' => 'ViewMemcache',
    'duration'=> 60,
    'prefix' => '',
    'servers' => array(
        '127.0.0.1:11211'
    ),
    'compress' => false,
));


Put this in APP/app_controller.php or your controller you want to do caching in.  

var $helpers = array('ViewMemcache.ViewMemcache');  

To make it cache everything put 

  $this->set('docache', true);

In beforeFiler in APP/app_controller.php

Or alternatively $this->set('docache', true); in each action.

You can override the duration by setting: 

	Configure::write('ViewMemcache.timeout', 6000);
	
Or per action with: 

	$this->set('docachetimeout', 4600);
	
A simple Nginx config for you might be: 

location / {
	set $memcached_key $request_uri;
	memcached_connect_timeout 2000;
	memcached_read_timeout 2000;
	memcached_pass 127.0.0.1:11211;
	default_type text/html;
	# if memcache throws one of the following errors head off to
	# the php-cgi
	error_page 404 502 504 = @fallback;
}

location @fallback{
	root /var/www/demo.*.com/app/webroot;

	try_files $uri $uri/ /index.php?url=$uri;
}